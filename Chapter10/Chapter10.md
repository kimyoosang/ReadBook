# Chapter10. 조건부 로직 간소화

## ** 10.1 조건문 분해하기**

### **배경**

- 복작한 조건부 로직은 프로그램을 복잡하게 만드는 가장 흔한 원흉에 속한다. 다양한 조건, 그에 따라 동작도 다양한 코드를 작성하면 순식간에 꽤 긴 함수가 탄생한다
- 조건을 검사하고 그 결과에 따른 동작을 표현한 코드는 무슨 일이 일어나는지는 이야기해주지만 '왜'일어나는지는 제대로 말해주지 않을 때가 많은 것이 문제다
- 거대한 코드 블록이 주어지면 코드를 부위별로 분해한 다음 해체된 코드 덩어리들을 각 덩어리의 의도를 살린 이름의 함수 호출로 바꾸면 해당 조건이 무엇인지 강조하고, 그래서 무엇을 분기했는지가 명백해진다. 분기한 이유 역시 더 명확해 진다

### **절차**

1. 조건식과 그 조건식에 딸린 조건절 각각을 함수로 추출한다

### **예시**

- [조건문 분해하기](./Example/DecomposeConditional.md)

## **10.2 조건식 통합하기**

### **배경**

- 비교하는 조건은 다르지만 그 결과로 수행하는 동작은 똑같은 코드들이 더러 있는데, 어차피 같은 일을 할 거라면 조건 검사도 하나로 통합하는게 낫다. 이럴 때 'and'연산자와 'or'연산자를 사용하면 여러 개의 비교 로직을 하나로 합칠 수 있다
- 조건부 코드를 통합하는게 중요한 이유는 두 가지다
  1. 여러 조각으로 나뉜 조건들을 하나로 통합함으로써 내가 하려는 일이 더 명확해진다
  2. 이 작업이 함수 추출하기까지 이어질 가능성이 높기 때문이다. 복잡한 조건식을 함수로 추출하면 코드의 의도가 훨씬 분명하게 드러나는 경우가 많다
- 조건식을 통합해야 하는 이유는 이 리팩터링을 하지 말아야 하는 이유도 설명해준다. 하나의 검사라고 생각할 수 없는, 다시 말해 진짜로 독립된 검사들이라고 판단되면 이 리팩터링을 해서는 안 된다

### **절차**

1. 해당 조건식들 모두에 부수효과가 없는지 확인한다
2. 조건문 두 개를 선택하여 두 조건문의 조건식들을 논리 연산자로 결합한다
3. 테스트한다
4. 조건이 하나만 남을 때 까지 2~3 과정을 반복한다
5. 하나로 합쳐진 조건식을 함수로 추출할지 고려해본다

### **예시**

- [조건식 통합하기](./Example/ConsolidateConditionalExpression.md)

## **10.3 중첩 조건문을 보호 구문으로 바꾸기**

### **배경**

- 조건문은 주로 두 가지 형태로 쓰인다. 참인 경로와 거짓인 경로 모두 정상 동작으로 이어지는 형태와, 한쪽만 정상인 형태다
- 두 경로 모두 정상 동작이면 if와 else절을 사용한다. 한쪽만 정상이라면 비정상 조건을 if에서 검사한 다음, 조건이 참이면(비정상이면) 함수에서 빠져나온다. 두 번째 검사 형태를 흔히 보호구문이라고 한다

### **절차**

1. 교체해야 할 조건 중 가장 바깥 것을 선택하여 보호 구문으로 바꾼다
2. 테스트한다
3. 1~2 과정을 필요한 만큼 반복한다
4. 모든 보호 구문이 같은 결과를 반환한다면 보호 구문들의 조건식을 통합한다

### **예시**

- [중첩 조건문을 보호 구문으로 바꾸기](./Example/ReplaceNestedConditionalWithGuardClauses.md)

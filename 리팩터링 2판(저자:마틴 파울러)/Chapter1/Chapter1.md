# Chapter 1. 리팩터링: 첫 번째 예시

## 1. 프로그램이 새로운 기능을 추가하기에 편한 구조가 아니라면, 먼저 기능을 추가하기 쉬운 형태로 리팩터링하고 나서 원하는 기능을 추가한다

    - 컴파일러는 코드가 깔끔하든 지저분하든 개의치 않지만 코드를 수정하려면 사람이 개입되고, 사람은 코드의 미적 상태에 민감하다.
    - 설계가 나쁜 시스템은 수정하기 어렵다. 그러므로 프로그램의 구조가 빈약하다면 대체로 구조부터 바로잡은 뒤에 기능을 수정하는 편이 작업하기가 훨씬 수월하다.

## 2. 리팩터링 하기전에 제대로 된 테스트부터 마련한다. 테스트는 반드시 자가진단하도록 만든다

    - 리팩터링의 첫 단계는 똑같다. 리팩터링할 코드 영역을 꼼꼼하게 검사해줄 테스트 코드들 부터 마련해야 한다.
    - 리팩터링 기법들이 버그 발생 여지를 최소화하도록 구성됐다고는 하나 실제 작업은 사람이 수행하기 때문에 언제든 실수할 수 있다.
    - 프로그램이 클수록 수정 과정에서 예상치 못한 문제가 발생할 가능성이 크다.
    - 이를 보완해주는 것이 테스트이다.

## 3. 리팩터링할 때 프로그램 수정을 작은 단계로 나눠 진행한다. 그래서 중간에 실수하더라도 버그를 쉽게 찾을 수 있다

    - 아무리 간단한 수정이라도 리팩터링 후에는 항상 테스트하는 습관을 들이는 것이 바람직하다.
    - 한 가지를 수정할 때마다 테스트하면, 오류가 생기더라도 변경 폭이 작기 때문에 살펴볼 범위도 좁아서 문제를 찾고 해결하기가 훨씬 쉽다.
    - 조금씩 변경하고 매번 테스트하는 것은 리팩터링 절차의 핵심이다.
    - 한 번에 너무 많이 수정하려다 실수를 저지르면 디버깅하기 어려워서 결과적으로 작업 시간이 늘어난다.

## 5. 컴퓨터가 이해하는 코드는 바보도 작성할 수 있다. 사람이 이해하도록 작성하는 프로그래머가 진정한 실력자다

    - 좋은 코드라면 하는일이 명확히 드러나야 하며, 이때 변수 이름은 커다란 역할을 한다.
    - 명확성을 높이기 위한 이름 바꾸기에는 조금도 망설이지 마라
    - 이름이 좋으면 함수 본문을 읽지 않고도 무슨 일을 하는지 알 수 있다. 처음에는 당장 떠오르는 최선의 일므을 사용하다가, 나중에 더 좋은 이름이 떠오를 때 바꾸는 식이 좋다

## 6. 리팩터링을 한 후 성능개선을 하는 것의 좋은점

    - 반복문을 쪼개서 성능이 느려지지 않을까 걱정할 수 있다. 이 처럼 반복문이 중복되는 것을 꺼지는 이들이 많다.
    - 때로는 리팩터링이 성능에 상당한 영향을 주기도 한다. 잘 다듬어진 코드라야 성능개선 작업도 훨씬 수월하다.
    - 리팩터링 과정에서 성능이 크게 떨여졌다면 리팩터링 후 시간을 내어 성능을 개선한다.

## 7. 프로그래밍에서만큼은 간결함보다 명료함이 진화할 수 있는 소프트웨어의 정수다

    - 리팩토링하기 전에비해 코드가 30줄 이상 늘어났다. 그러나 리팩토링을 통해 함수들을 모듈화하면 각 부분이 하는 일과 그 부분들이 맞물려 돌아가는 과정을 파악하기 쉬워진다.
    - 추가된 코드 덕분에 전체 로직을 구성하는 요소 감각이 더 뚜렷이 부각되고, 계산하는 부분과 출력형식을 다루는 부분이 분뢰됐다.
    - 이렇게 모듈화하면 코드를 중복하지 않아도 된다

## 8. 캠핑자들에게는 "도착했을 때보다 깔끔하게 정돈하고 떠난다"는 규칙이 있다. 프로그래밍도 마찬가지다. 항시 코드베이스를 작업 시작 전보다 건강하게(healthy)만들어놓고 떠나야 한다.

    - 로직을 더 간결하게 만들 수 도 있지만 리팩터링과 기능 추가 사이의 균형을 맞추려고 노력한다
    - 현재 코드에서 리팩터링이 그다지 절실하게 느껴지지 않을 수 있지만, 그래도 어느 정도 균형점을 잡을 수 있다
    - 완벽하지는 않더라도, 분명 더 나아지게 한다.

## 9. 좋은 코드를 가늠하는 확실한 방법은 '얼마나 수정하기 쉬운가'다

    - 어떤 코드가 좋은 코드인지에 대한 의견은 분분하나 '수정하기 쉬운 정도'야 말로 취향을 넘어서는 관점이다.
    - 코드는 명확해야한다, 코드를 수정해야 할 상황이 되면 고쳐야 할 곳을 쉽게 찾을 수 있고 오류 없이 빠르게 수정할 수 있어야 한다
    - 건강한 코드베이스는 생산성을 극대화하고, 곡개에게 필요한 기능을 더 빠르고 저렴한 비용으로 제공하도록 해준다.
    - 리팩터링을 효과적으로 하는 핵심은, 단계를 잘게 나눠야 더 빠르게 처리할 수 있고, 코드는 절대 깨지지 않으며, 이러한 작은 단계들이 모여서 상당히 큰 변화를 이룰 수 있다는 사실을 깨닫는 것이다.

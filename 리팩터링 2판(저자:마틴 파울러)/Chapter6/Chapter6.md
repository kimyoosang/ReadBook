# Chapter6. 기본적인 리팩터링

## <U>6.1 함수 추출하기</U>

### **배경**

- 함수 추출하기는 가장 많은 사용하는 리팩터링 기법중 하나인데, 코드 조각을 찾아 무슨일을 하는지 파악한 다음, 독립된 함수로 추출하고 목적에 맞는 이름을 붙여서 사용한다
- 코드를 언제 독립적 함수로 묶어야 하는지는 코드를 보고 무슨일을 하는지 파악하는데 시간이 한참 걸린다면 의심해 볼 수 있다
- 함수로 추출한뒤 '무슨 일'에 걸맞는 이름을 짓는다. 이렇게 해두면 나중에 코드를 다시 읽을 때 함수의 목적이 눈에 확 들어오고, 본문코드에 대해서는 더 이상 신경 쓸 일이 거의 없다
- 함수를 짧게 만듦녀 함수호출이 많아져서 성능이 느려질까 걱정하는 사람도 있다. 그러나 함수가 짧으면 캐싱하기가 더 쉽기 땜누에 컴파일러가 최적화하는데 유리할 때가 많다
- 긴 함수에는 각가의 코드 덩어리 첫머리에 그 목적을 설명하는 주석이 달려있을 때가 많다. 해당 코드 덩어리를 추출한 함수의 이름을 지을 때 이 주석을 참고하면 도움이 될 것이다

### **절차**

1. 함수를 새로 만들고 목적을 잘 드러내는 이름을 붙인다 ('어떻게'가 아닌 '무엇을'하는지가 드러나야 한다)
2. 추출할 코드를 원본 함수에서 복사하여 새 함수에 붙여넣는다
3. 추출한 코드 중 원본 함수의 지역 변수를 참조하거나 추출한 함수의 유효범위를 벗어나는 변수는 없는지 검사한다. 있다면 매개변수로 전달한다
4. 변수를 다 처리했다면 컴파일한다
5. 원본 함수에서 추출한 코드 부분을 새로 만든 함수를 호출하는 문장으로 바꾼다(즉,추출한 함수로 일을 위임한다)
6. 테스트한다
7. 다른 코드에 방금 추출한 것과 똑같거나 비슷한 코드가 없는지 살핀다. 있다면 방금 추출한 새 함수를 호출하도록 바꿀지 검토한다 (인라인 코드를 함수 호출로 바꾸기)

### **예시**

- **ExtractFunctionExample.md 파일 참조**

## <U>6.2 함수 인라인하기</U>

### **배경**

- 함수 인라인하기를 하면 유용한 것만 남기고 나머지는 제거할 수 있다
- 리팩터링 과정에서 잘못 추출된 함수들도 다시 인라인한다
- 간접 호추을 너무 과하게 쓰는 코드도 흔한 인라인 대상이다
- 다른 함수로 단순히 위임하기만 하는 함수들이 너무 많아서 위임 관계가 복잡하게 얽혀있으면 인라인 해버린다

### **절차**

1. 다형 메서드인지 확인한다(서브클래스에서 오버랄이드하는 메서드는 인라인 하면 안된다)
2. 인라인할 함수를 호출하는 곳을 모두 찾는다
3. 각 호출문을 함수 본문으로 교체한다
4. 함수 정의(원래 함수)를 삭제한다

### **예시**

- **InlineFunctionExample.md 파일 참조**
